ARG BASEIMAGE=ghcr.lizzie.fun/fj0r/so:rust
FROM ${BASEIMAGE}

ARG MESSAGE=''
ENV HASKELL_BUILD_MESSAGE=${MESSAGE}
ENV BOOTSTRAP_HASKELL_NONINTERACTIVE=1
ENV GHCUP_INSTALL_BASE_PREFIX=/opt GHCUP_ROOT=/opt/.ghcup
ENV STACK_ROOT=/opt/stack
ENV PATH=${GHCUP_ROOT}/bin:$PATH

RUN nu /opt/build/main.nu haskell
