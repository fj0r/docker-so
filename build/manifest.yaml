components:
    http-client:
        apt: [curl, ca-certificates]
    net-utils:
        apt: [rsync, tcpdump, socat]
        # components
        deps: [network]
        build-deps: []
    websocket:
        http:
        - version:
              type: github
              repo: vi/websocat
    network:
        apt: [lsof, inetutils-ping, iproute2, iptables, net-tools]
    sys:
        apt: [sudo, procps, htop, cron, tzdata]
    security:
        apt: [openssl]
    utils:
        apt: [sqlite3, jq, patch, tree, logrotate]
        http:
        - version:
              type: github
              repo: BurntSushi/ripgrep
        - version:
              type: github
              repo: sharkdp/fd
    disk:
        http:
        - version:
              type: github
              repo: bootandy/dust
    compress:
        apt: [xz-utils, zstd, zip, unzip]
    tunnel:
        http:
        - version:
              type: github
              repo: erebe/wstunnel
    quickjs:
        http:
        - name: quickjs
          version:
              type: html
              url: https://bellard.org/quickjs/
    neovim:
        http:
        - name: neovim
          version:
              type: github
              url: 'neovim/neovim'
              extract:
              - from-json: null
              - index: name
              - only-nums: null
          download:
              url: https://github.com/neovim/neovim/releases/latest/download/nvim-linux64.tar.gz
              filename: nvim-{{version}}-linux64.tar.gz
              strip: 1
              target: /usr/local

    neovim-config:
        flow:
        - pipeline:
          - type: git
            url: https://github.com/fj0r/nvim-lua.git
            dist: ~/.config/nvim
          - type: cmd
            cmd:
            - nvim --headless "+Lazy! sync" +qa
    rust:
        http:
        - name: cargo
          version:
              type: html
          packages:
            - tokio
    bootstrap:
        shell:
        - name: bootstrap




layers:
    test-deps:
    - net-utils
    bootstrap:
    - bootstrap
    neovim:
    - neovim
    neovim-config:
    - neovim-config
    neovim-full:
    - neovim
    - neovim-config
    base:
    - http-client
    - net-utils
    - websocket
    - network
    - sys
    - security
    - utils
    - disk
    - compress
    - tunnel
    - quickjs

